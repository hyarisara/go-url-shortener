<!DOCTYPE html>
<html>
<head>
    <title>URL Shortener</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container">
    <div class="card">
        <h1>Shorten a URL</h1>

        <form action="/shorten" method="POST">
            <input type="text" name="url" placeholder="https://example.com" required>
            <input type="text" name="custom" placeholder="Optional custom code">
            <button type="submit">Shorten</button>
        </form>

        {{if .}}
        <div class="result">
            <strong>Short URL:</strong><br>
            <div style="display:flex; gap:10px; margin-top:8px;">
                <input id="shortUrl" value="{{.}}" readonly>
                <button type="button" onclick="copyURL()">Copy</button>
            </div>
            <small id="copyMsg" style="color:green; display:none;">Copied to clipboard!</small>
        </div>
        {{end}}

        <br>
        <a href="/list">View All URLs</a>
    </div>
</div>

<script>
function copyURL() {
    const input = document.getElementById("shortUrl");
    input.select();
    input.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(input.value);

    const msg = document.getElementById("copyMsg");
    msg.style.display = "block";
    setTimeout(() => { msg.style.display = "none"; }, 2000);
}
</script>
</body>
</html>
